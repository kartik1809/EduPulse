<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #866565;
            border: 1px solid #917171;
            border-radius: 5px;
        }

        .question {
            margin-bottom: 20px;
            color: #ffffff; /* Change font color to white */
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>Quiz</h1>
        <div id="quiz"></div>
    </div>

    <script>
        window.onload = function () {
            let questions; // Variable to store quiz questions

            // Fetch CSV data and parse it
            fetch("quiz_questions.csv")
                .then((response) => response.text())
                .then((data) => {
                    console.log("CSV data:", data); // Log CSV data
                    // Parse CSV data
                    const rows = data.split("\n").slice(1); // Skip header row
                    questions = rows.map((row) => {
                        const columns = row.split(",");
                        return {
                            question_number: columns[0],
                            question: columns[1],
                            options: [columns[2], columns[3], columns[4], columns[5]],
                            correct_answer: columns[6],
                            explanation: columns[7],
                        };
                    });
                    console.log("Parsed questions:", questions); // Log parsed questions
                    // Generate quiz HTML
                    const quizContainer = document.getElementById("quiz");
                    questions.forEach((question) => {
                        const questionHtml = `
                            <div class="question">
                                <h3>${question.question}</h3>
                                <ul>
                                    ${question.options
                                        .map(
                                            (option, index) =>
                                                `<li><input type="radio" name="question${question.question_number}" value="${option}" onclick="checkAnswer(this, ${question.question_number})">${option}</li>`
                                        )
                                        .join("")}
                                </ul>
                                <div class="feedback" id="feedback${question.question_number}"></div>
                            </div>
                        `;
                        quizContainer.insertAdjacentHTML("beforeend", questionHtml);
                    });
                })
                .catch((error) => console.error("Error fetching CSV file:", error));

            // Function to check the answer
            function checkAnswer(selectedOption, questionNumber) {
                console.log("Selected option:", selectedOption.value); // Log selected option
                console.log("Question number:", questionNumber); // Log question number
                const feedbackContainer = document.getElementById(`feedback${questionNumber}`);
                const selectedAnswer = selectedOption.value;
                const correctAnswer = questions[questionNumber - 1].correct_answer;
                if (selectedAnswer === correctAnswer) {
                    feedbackContainer.innerHTML = `<p>Correct answer: ${correctAnswer}</p><p>${questions[questionNumber - 1].explanation}</p>`;
                    feedbackContainer.style.color = "green";
                } else {
                    feedbackContainer.innerHTML = "<p>Wrong answer</p>";
                    feedbackContainer.style.color = "red";
                }
            }
        };
    </script>
</body>
</html>

